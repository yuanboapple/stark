{"remainingRequest":"/Users/mac/Desktop/222/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/mac/Desktop/222/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/222/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/222/src/views/business/components/BusinessList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/222/src/views/business/components/BusinessList.vue","mtime":1561026696000},{"path":"/Users/mac/Desktop/222/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/222/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/222/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/222/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/222/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/222/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/222/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/222/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mac/Desktop/222/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { async } from 'q';\nexport default {\n  data: function data() {\n    return {\n      dialogVisible: false,\n      commisionDialog: false,\n      userState: '',\n      isEdit: false,\n      total: 0,\n      condition: {\n        keyword: '',\n        page: 1,\n        type: 1\n      },\n      businessList: [],\n      buisform: {\n        account: '',\n        businessName: '',\n        industry: '',\n        password: '',\n        password2: '',\n        id: 0\n      },\n      commisionForm: {\n        account: '',\n        rate: ''\n      },\n      buisRules: {\n        account: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }],\n        businessName: [{\n          required: true,\n          message: '请输入商户名称',\n          trigger: 'blur'\n        }],\n        industry: [{\n          required: true,\n          message: '请选择行业',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }],\n        password2: [{\n          required: true,\n          message: '请再次输入密码',\n          trigger: 'blur'\n        }]\n      },\n      commisionRules: {\n        account: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        rate: [{\n          required: true,\n          message: '请输入佣金比例',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    handleSearchClick: function () {\n      var _handleSearchClick = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this._getBusinessList(this.condition);\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleSearchClick() {\n        return _handleSearchClick.apply(this, arguments);\n      }\n\n      return handleSearchClick;\n    }(),\n    handleViewData: function handleViewData(id) {\n      var _id = id;\n      this.$router.push({\n        name: 'busiDataStatistic',\n        query: {\n          id: _id\n        }\n      });\n    },\n    handleAddBusiness: function () {\n      var _handleAddBusiness = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var body, resData;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                body = {\n                  tel: this.buisform.account,\n                  platformName: this.buisform.businessName,\n                  industry: this.buisform.industry,\n                  password: this.buisform.password,\n                  repassword: this.buisform.password2,\n                  platform: 2\n                };\n                _context2.next = 3;\n                return this.http.post(\"\".concat(this.common.basePath, \"/platform/createNewPlatform.api\"), body);\n\n              case 3:\n                resData = _context2.sent;\n\n                if (resData.code === 200) {\n                  this.$message.success(resData.msg);\n                  this.dialogVisible = false;\n                }\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleAddBusiness() {\n        return _handleAddBusiness.apply(this, arguments);\n      }\n\n      return handleAddBusiness;\n    }(),\n\n    /*\n    **网络获取商户列表\n    */\n    _getBusinessList: function () {\n      var _getBusinessList2 = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(condition) {\n        var _condition, resData;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _condition = condition;\n                _context3.next = 3;\n                return this.http.get('/platform/merchantLists', _condition);\n\n              case 3:\n                resData = _context3.sent;\n\n                if (resData.code === 200) {\n                  this.businessList = resData.data.data;\n                  this.condition.page = resData.data.current_page;\n                  this.total = resData.data.total;\n                }\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function _getBusinessList(_x) {\n        return _getBusinessList2.apply(this, arguments);\n      }\n\n      return _getBusinessList;\n    }(),\n\n    /*\n     **处理冻结平台账户事件\n     */\n    handleFrozenAccount: function () {\n      var _handleFrozenAccount = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4(id, index) {\n        var _index, platformId, resData;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _index = index;\n                platformId = id;\n                _context4.next = 4;\n                return this.http.get('/platform/frozenPlatform', {\n                  id: platformId\n                });\n\n              case 4:\n                resData = _context4.sent;\n\n                if (resData.code === 200) {\n                  this.$message.success(\"禁用成功\");\n                  this.businessList[_index].isFrozen = true;\n                  this.businessList[_index].isActive = false;\n                }\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function handleFrozenAccount(_x2, _x3) {\n        return _handleFrozenAccount.apply(this, arguments);\n      }\n\n      return handleFrozenAccount;\n    }(),\n\n    /*\n     **启动平台账户事件\n     */\n    enableAccount: function () {\n      var _enableAccount = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee5(id) {\n        var _id, resData;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _id = id;\n                _context5.next = 3;\n                return this.http.get('/platform/enablePlatform', {\n                  id: _id\n                });\n\n              case 3:\n                resData = _context5.sent;\n\n                if (!(resData.code === 200)) {\n                  _context5.next = 8;\n                  break;\n                }\n\n                this.$message.success(resData.msg);\n                _context5.next = 8;\n                return this._getBusinessList(this.condition);\n\n              case 8:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function enableAccount(_x4) {\n        return _enableAccount.apply(this, arguments);\n      }\n\n      return enableAccount;\n    }(),\n\n    /*\n    **处理确定设置佣金事件\n    */\n    handleConfirmSetCommis: function () {\n      var _handleConfirmSetCommis = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee6() {\n        var param, resData;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                param = {\n                  type: 1,\n                  tel: this.commisionForm.account,\n                  proportion: this.commisionForm.rate\n                };\n                _context6.next = 3;\n                return this.http.get('/platform/setMerchantComsion', param);\n\n              case 3:\n                resData = _context6.sent;\n\n                if (resData.code == 200) {\n                  this.$message.success(resData.msg);\n                  this.commisionDialog = false;\n                }\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function handleConfirmSetCommis() {\n        return _handleConfirmSetCommis.apply(this, arguments);\n      }\n\n      return handleConfirmSetCommis;\n    }(),\n\n    /*\n    **处理分页当前页改变事件\n    */\n    handleCurrentchange: function handleCurrentchange(val) {\n      this.condition.page = val;\n\n      this._getBusinessList(this.condition);\n    },\n\n    /*\n    **处理slect选择事件\n    */\n    handleSelectChange: function () {\n      var _handleSelectChange = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee7(val) {\n        var _val;\n\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _val = val;\n                this.condition.type = _val;\n                _context7.next = 4;\n                return this._getBusinessList(this.condition);\n\n              case 4:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function handleSelectChange(_x5) {\n        return _handleSelectChange.apply(this, arguments);\n      }\n\n      return handleSelectChange;\n    }(),\n\n    /*\n    **编辑商户\n    */\n    handleEdit: function () {\n      var _handleEdit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee8(id) {\n        var _id, resData;\n\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _id = id;\n                this.isEdit = true;\n                this.dialogVisible = true;\n                _context8.next = 5;\n                return this.http.get('/platform/merchantDetail', {\n                  id: _id\n                });\n\n              case 5:\n                resData = _context8.sent;\n\n                if (resData.code === 200) {\n                  this.buisform.industry = resData.data.industry;\n                  this.buisform.businessName = resData.data.platformName;\n                  this.buisform.account = resData.data.tel;\n                  this.buisform.id = _id;\n                }\n\n              case 7:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function handleEdit(_x6) {\n        return _handleEdit.apply(this, arguments);\n      }\n\n      return handleEdit;\n    }(),\n\n    /*\n    **确认修改商户\n    */\n    handleAConfirmEditBusiness: function () {\n      var _handleAConfirmEditBusiness = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee9() {\n        var data, resData;\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                data = {\n                  id: this.buisform.id,\n                  tel: this.buisform.account,\n                  platformName: this.buisform.businessName,\n                  industry: this.buisform.industry,\n                  password: this.buisform.password,\n                  repassword: this.buisform.password2\n                };\n                _context9.next = 3;\n                return this.http.post('/platform/editMerchant', data);\n\n              case 3:\n                resData = _context9.sent;\n\n                if (!(resData.code === 200)) {\n                  _context9.next = 9;\n                  break;\n                }\n\n                this.$message.success(resData.msg);\n                _context9.next = 8;\n                return this._getBusinessList(this.condition);\n\n              case 8:\n                this.dialogVisible = false;\n\n              case 9:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function handleAConfirmEditBusiness() {\n        return _handleAConfirmEditBusiness.apply(this, arguments);\n      }\n\n      return handleAConfirmEditBusiness;\n    }(),\n    addBuisDialogClose: function addBuisDialogClose() {\n      this.isEdit = false;\n      this.$refs.buisform.resetFields();\n    },\n\n    /*\n    **取消增加/修改商户\n    */\n    concealDialog: function concealDialog() {\n      this.dialogVisible = false;\n      this.$refs.buisform.resetFields();\n    }\n  },\n  mounted: function () {\n    var _mounted = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee10() {\n      return regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              _context10.next = 2;\n              return this._getBusinessList(this.condition);\n\n            case 2:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }()\n};",{"version":3,"sources":["BusinessList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n      <div class=\"contain-footer-top\">\n        <div class=\"contain-footer-topl\">                    \n          <el-button class=\"sys-Btn\" @click=\"dialogVisible = true\" type=\"primary\">新增商户</el-button>\n        </div>\n        <div class=\"contain-footer-topr\">\n          <el-select v-model=\"userState\" class=\"user-state-input\" @change=\"handleSelectChange\"  placeholder=\"状态\">\n             <el-option label=\"全部\" value=\"1\"></el-option>\n             <el-option label=\"已激活\" value=\"2\"></el-option>\n             <el-option label=\"未激活\" value=\"3\"></el-option>\n          </el-select>  \n          <el-input v-model=\"condition.keyword\" class=\"searchTool\">\n                <i\n                 class=\"el-icon-search el-input__icon\"\n                 slot=\"suffix\"\n                 @click=\"handleSearchClick\">\n                </i>\n          </el-input>                                          \n        </div>                        \n      </div>\n      <div class=\"contain-footer-bottom\">\n            <el-table\n                :data=\"businessList\"\n                border\n                style=\"width: 100%\">\n                <el-table-column align=\"center\"\n                  type=\"index\"\n                  label=\"ID\"\n                  width=\"80\">\n                </el-table-column>  \n                <el-table-column\n                  prop=\"account\"\n                  label=\"账号\"\n                  min-width=\"140\"\n                  align=\"center\">                      \n                </el-table-column>\n                <el-table-column\n                  prop=\"name\"\n                  label=\"商户名称\"\n                  width=\"100\"\n                  align=\"center\">\n                </el-table-column>\n                <el-table-column\n                  prop=\"company\"\n                  label=\"用户类型\"\n                  align=\"center\"\n                  width=\"80\">\n                </el-table-column>\n                <el-table-column\n                  prop=\"channelName\"\n                  label=\"所属渠道商\"\n                  align=\"center\"\n                  min-width=\"120\">\n                </el-table-column>\n                <el-table-column\n                  prop=\"registerTime\"\n                  label=\"注册时间\"\n                  align=\"center\"\n                  min-width=\"180\">\n                </el-table-column>                    \n                <el-table-column\n                  label=\"操作\"\n                  align=\"center\"\n                  min-width=\"220\">\n                  <template slot-scope=\"scope\">\n                      <el-button class=\"sys-text-Btn\" size=\"small\" @click=\"handleEdit(scope.row.id)\" type=\"text\">编辑</el-button>\n                      <el-button class=\"sys-text-Btn\" size=\"small\" @click=\"commisionForm.account=scope.row.account;commisionDialog = true\" type=\"text\">设置手续费</el-button>\n                      <el-button class=\"sys-text-Btn\" size=\"small\" type=\"text\" @click=\"handleViewData(scope.row.id)\">数据统计</el-button>\n                      <el-button v-if=\"scope.row.isFrozen\" @click=\"enableAccount(scope.row.id)\"  size=\"mini\" type=\"success\">启用</el-button>\n                      <el-button v-else @click=\"handleFrozenAccount(scope.row.id, scope.$index)\"   size=\"mini\" type=\"danger\">禁用账户</el-button>\n                  </template>\n                </el-table-column>\n                <el-table-column\n                  label=\"账号状态\"\n                  align=\"center\"\n                  width=\"150\">\n                  <template slot-scope=\"scope\">\n                      <span v-if=\"!scope.row.isActive\" class=\"no-activeBtn\" type=\"text\">未激活</span>\n                      <span v-else type=\"text\" class=\"activeBtn\">激活</span>\n                  </template>\n                </el-table-column>                                                                                                 \n            </el-table>\n      </div>\n      <el-pagination\n          class=\"pagination\"\n          background\n          layout=\"prev, pager, next\"\n          :hide-on-single-page=\"total<=15\"\n          @current-change=\"handleCurrentchange\"\n          :current-page = \"condition.page\"\n          :page-size=\"15\"\n          :total=\"total\">\n      </el-pagination>\n      <div style=\"clear:both;\"></div>       \n      <el-dialog class=\"dialog\" id=\"addBuisDialog\"\n           :title=\"isEdit?'修改商户':'新增商户'\"\n           :visible.sync=\"dialogVisible\"\n           @close=\"addBuisDialogClose\"\n           width=\"23%\"\n           >\n             <el-form :model=\"buisform\" :rules=\"buisRules\" ref=\"buisform\" label-width=\"auto\" size=\"medium\" label-position=\"right\" class=\"demo-ruleForm\">\n               <el-form-item label=\"账号\"  prop=\"account\">\n                 <el-input  :disabled=\"isEdit\" v-model=\"buisform.account\"></el-input>\n               </el-form-item>\n               <el-form-item label=\"商户名称\" prop=\"businessName\">\n                 <el-input v-model=\"buisform.businessName\"></el-input>  \n               </el-form-item>\n                <el-form-item label=\"行业\" prop=\"industry\">\n                    <el-select v-model=\"buisform.industry\" placeholder=\"请选择行业\">\n                      <el-option label=\"金融\" value=\"金融\"></el-option>\n                      <el-option label=\"其他\" value=\"其他\"></el-option>\n                    </el-select>\n                </el-form-item>\n                <template v-if=\"!isEdit\">\n                   <el-form-item label=\"密码\" prop=\"password\">\n                    <el-input v-model=\"buisform.password\"></el-input>  \n                   </el-form-item>\n                   <el-form-item label=\"确认密码\" prop=\"password2\">\n                    <el-input v-model=\"buisform.password2\"></el-input>  \n                   </el-form-item>  \n                </template>\n              \n             </el-form>\n           <span slot=\"footer\" class=\"dialog-footer\">\n             <el-button v-if=\"!isEdit\" class=\"sys-Btn\" type=\"primary\" @click=\"handleAddBusiness\">确 定</el-button>               \n             <el-button v-else class=\"sys-Btn\" type=\"primary\" @click=\"handleAConfirmEditBusiness\">修改</el-button>  \n             <el-button @click=\"concealDialog\">取 消</el-button>\n           </span>\n        </el-dialog> \n      <el-dialog class=\"dialog\"\n           id=\"setcommisionDialog\"\n           title=\"设置佣金\"\n           :visible.sync=\"commisionDialog\"\n           width=\"23%\"\n           >\n             <el-form :model=\"commisionForm\" :rules=\"commisionRules\" ref=\"commisionRules\" label-width=\"auto\" size=\"medium\" label-position=\"right\" class=\"demo-ruleForm\">\n               <el-form-item label=\"确认用户名：\" prop=\"account\">\n                 <el-input disabled :placeholder=\"commisionForm.account\"></el-input>\n               </el-form-item>\n               <el-form-item label=\"佣金比例：\" prop=\"rate\">\n                 <el-input v-model=\"commisionForm.rate\"></el-input>  \n               </el-form-item>              \n             </el-form>\n           <span slot=\"footer\" class=\"dialog-footer\">\n\n             <el-button  class=\"sys-Btn\" type=\"primary\" @click=\"handleConfirmSetCommis\">确 定</el-button>               \n             \n             <el-button @click=\"commisionDialog = false\">取 消</el-button>\n           </span>\n    </el-dialog>\n                              \n    </div>\n</template>\n<script>\nimport { async } from 'q';\nexport default {\n    data() {\n        return {\n            dialogVisible: false,\n            commisionDialog: false,\n            userState:'',\n            isEdit: false,\n            total: 0,\n            condition: {\n               keyword: '',\n               page:1,\n               type:1\n            },\n            businessList: [],\n            buisform: {\n                account:'',\n                businessName: '',\n                industry: '',\n                password: '',\n                password2: '',\n                id:0\n            },\n            commisionForm: {\n                account: '',\n                rate: ''\n            },\n            buisRules:{\n              account: [\n                  { required: true, message: '请输入账号', trigger: 'blur' },\n              ],\n              businessName: [\n                  { required: true, message: '请输入商户名称', trigger: 'blur' },\n              ],   \n              industry:[\n                  { required: true, message: '请选择行业', trigger: 'blur' },\n              ],\n              password:[\n                  { required: true, message: '请输入密码', trigger: 'blur' },                  \n              ],                          \n              password2:[\n                  { required: true, message: '请再次输入密码', trigger: 'blur' },                  \n              ] \n            },\n            commisionRules: {\n              account: [\n                  { required: true, message: '请输入用户名', trigger: 'blur' },\n              ],\n              rate: [\n                  { required: true, message: '请输入佣金比例', trigger: 'blur' },\n              ],                   \n            },            \n        }\n    },\n    methods: {\n        async handleSearchClick(){\n          await this._getBusinessList(this.condition)\n        },\n        handleViewData(id) {\n          let _id = id\n           this.$router.push({name: 'busiDataStatistic', query: {id: _id}})\n        },\n        async handleAddBusiness(){\n          let body = {\n            tel: this.buisform.account,\n            platformName: this.buisform.businessName,\n            industry: this.buisform.industry,\n            password: this.buisform.password,\n            repassword: this.buisform.password2,\n            platform: 2\n          }\n          let resData = await this.http.post(`${this.common.basePath}/platform/createNewPlatform.api`, body)\n          if(resData.code === 200)\n          {\n            this.$message.success(resData.msg)\n            this.dialogVisible = false\n\n          }\n        },\n        /*\n        **网络获取商户列表\n        */\n        async _getBusinessList(condition){\n          let _condition = condition\n          let resData = await this.http.get('/platform/merchantLists', _condition)\n          if(resData.code === 200){\n            this.businessList = resData.data.data\n            this.condition.page = resData.data.current_page\n            this.total = resData.data.total\n          }\n\n        },\n        /*\n         **处理冻结平台账户事件\n         */\n       async handleFrozenAccount(id, index){\n         let _index = index\n         let platformId = id\n         let resData = await this.http.get('/platform/frozenPlatform', {id: platformId})\n         if(resData.code===200)\n         {\n           this.$message.success(\"禁用成功\")\n           this.businessList[_index].isFrozen = true\n           this.businessList[_index].isActive = false\n         }\n        }, \n        /*\n         **启动平台账户事件\n         */\n        async enableAccount(id) {\n          let _id = id\n          let resData = await this.http.get('/platform/enablePlatform', {id: _id})\n          if(resData.code === 200){\n            this.$message.success(resData.msg)\n            await this._getBusinessList(this.condition)\n          }\n        },\n       /*\n       **处理确定设置佣金事件\n       */\n       async handleConfirmSetCommis(){\n         let param = {\n           type: 1,\n           tel: this.commisionForm.account,\n           proportion: this.commisionForm.rate\n         }\n         let resData = await this.http.get('/platform/setMerchantComsion', param)\n         if(resData.code == 200)\n         {\n\n           this.$message.success(resData.msg)\n           this.commisionDialog = false\n         }\n       }, \n        /*\n        **处理分页当前页改变事件\n        */\n       handleCurrentchange(val) {\n         this.condition.page = val\n         this._getBusinessList(this.condition)\n       },\n        /*\n        **处理slect选择事件\n        */       \n       async handleSelectChange(val){\n         let _val = val;\n         this.condition.type = _val\n         await this._getBusinessList(this.condition)\n       },\n        /*\n        **编辑商户\n        */        \n       async handleEdit(id) {\n         let _id = id\n         this.isEdit = true\n         this.dialogVisible = true\n         let resData = await this.http.get('/platform/merchantDetail', {id: _id})\n         if(resData.code === 200){\n            this.buisform.industry = resData.data.industry\n            this.buisform.businessName = resData.data.platformName\n            this.buisform.account = resData.data.tel\n            this.buisform.id = _id\n         }\n       },\n        /*\n        **确认修改商户\n        */ \n       async handleAConfirmEditBusiness() {\n         let data = {\n           id: this.buisform.id,\n           tel: this.buisform.account,\n           platformName: this.buisform.businessName,\n           industry: this.buisform.industry,\n           password: this.buisform.password,\n           repassword: this.buisform.password2\n         }\n         let resData = await this.http.post('/platform/editMerchant', data)\n         if(resData.code === 200){\n           this.$message.success(resData.msg)\n           await this._getBusinessList(this.condition)\n           this.dialogVisible = false\n         }\n       },\n      addBuisDialogClose(){\n         this.isEdit = false\n         this.$refs.buisform.resetFields()\n       },\n       /*\n       **取消增加/修改商户\n       */\n       concealDialog() {\n         this.dialogVisible = false\n         this.$refs.buisform.resetFields()\n       }\n    },\n    async mounted() {\n      await this._getBusinessList(this.condition)\n    },\n}\n</script>\n\n"],"sourceRoot":"src/views/business/components"}]}