{"remainingRequest":"/Users/yuanbo/Desktop/与燕/222/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/yuanbo/Desktop/与燕/222/src/views/MyLogin.vue?vue&type=template&id=7b0e1d53&","dependencies":[{"path":"/Users/yuanbo/Desktop/与燕/222/src/views/MyLogin.vue","mtime":1560148228809},{"path":"/Users/yuanbo/Desktop/与燕/222/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuanbo/Desktop/与燕/222/node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/yuanbo/Desktop/与燕/222/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuanbo/Desktop/与燕/222/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n    <div>\n    <div v-if=\"role === 'stark'\" class=\"login plateform-login\">\n        <div class=\"login-wrap\">\n            <el-row class=\"main-wrap\">\n               <el-col :span=\"10\" id=\"wrap-left\">\n               </el-col>\n               <el-col :span=\"14\" id=\"wrap-right\">\n                   <div v-if=\"!resetflag\" class=\"login-form-wrap\">\n                       <h2 class=\"login-title\">Stark</h2>\n                       <span class=\"login-subTitle\">Stark承兑支付系统 - 平台管理</span>\n                       <el-form class=\"login-form\" ref=\"form\"  :rules=\"rules\" :model=\"form\">\n                            <el-form-item prop=\"userName\">\n                                 <el-input v-model=\"form.userName\" placeholder=\"请输入账号/手机号\"></el-input>\n                            </el-form-item>\n                            <el-form-item prop=\"password\">\n                                 <el-input v-model=\"form.password\" placeholder=\"请输入密码\"></el-input>\n                            </el-form-item>\n                        <div class=\"userOptions\">\n                           <span id=\"forgetPwd\" @click=\"forgetPwdHandle\">忘记密码？</span>    \n                           <el-checkbox  v-model=\"form.checked\">记住密码</el-checkbox>                           \n                       </div>\n                       <el-form-item>\n                         <el-button class=\"login-Btn\" @click=\"handleLogin\">登录</el-button>\n                       </el-form-item>\n                       </el-form>\n                   </div>\n                   <div v-else-if=\"resetflag\" class=\"login-form-wrap\">    \n                     <div v-if=\"resetStatus===''\">\n                        <h2 class=\"login-subTitle\">设置新密码</h2>\n                        <el-form  class=\"login-form\" ref=\"resetForm\" label-position=\"left\" label-width=\"6.42vw\"\n                           :rules=\"resetRules\" :model=\"resetForm\">\n                             <el-form-item prop=\"userName\"  label=\"账号：\">\n                                  <el-input v-model=\"resetForm.userName\" placeholder=\"请输入账号/手机号\"></el-input>\n                             </el-form-item>\n                             <el-form-item prop=\"password\" label=\"新密码：\">\n                                  <el-input v-model=\"resetForm.password\" placeholder=\"新密码\"></el-input>\n                             </el-form-item>\n                             <el-form-item prop=\"newPassword\" label=\"重输新密码：\">\n                                  <el-input v-model=\"resetForm.newPassword\" placeholder=\"请重新输入设置的新密码\"></el-input>\n                             </el-form-item>\n                             <el-form-item prop=\"verifyCode\" label=\"验证码：\" class=\"verifyCodePart\">\n                                  <el-input v-model=\"resetForm.verifyCode\" class=\"verifyCode-input\" placeholder=\"请输入收到的验证码\"></el-input>\n                                  <el-button v-if=\"!awardCodeBtnRun\" class=\"awardCode-Btn\" size=\"mini\" @click=\"awardCode\" >{{codeTxt}}</el-button>\n                                  <el-button v-else class=\"awardCode-Btn awardCode-Btn-run\" size=\"mini\">重新获取({{count}})s</el-button>\n                             </el-form-item>\n                            <el-form-item label-width=\"0px\">\n                             <el-button class=\"login-Btn\" @click=\"resPwdHandle\">确认</el-button>\n                            </el-form-item> \n                        </el-form> \n                        <div class=\"bottomAside\">\n                            <span class=\"changeTitle\">切换至：</span>\n                            <a class=\"cutMerchant\" href=\"#\">承总商后台</a>\n                            <a class=\"cutBusiness\" href=\"#\">商户后台</a>\n                        </div>                                              \n                     </div>\n                      <div v-else-if=\"resetStatus\">\n                        <h2 class=\"resetSucess-title\">设置成功!</h2>\n                        <div class=\"loginInfo-part\">\n                          <img id=\"loginInfo-part-icon\" src=\"../assets/imgs/mylogin/succinfo.png\" alt=\"\">\n                          <span id=\"loginInfo-part-text\">新密码设置成功</span>\n                        </div>\n                      <el-button class=\"login-Btn\" @click=\"resetSuccHandle\">去登录</el-button> \n                      <div class=\"bottomAside\">\n                            <span class=\"changeTitle\">切换至：</span>\n                            <a class=\"cutMerchant\" href=\"#\">承总商后台</a>\n                            <a class=\"cutBusiness\" href=\"#\">商户后台</a>\n                      </div>                     \n                     </div> \n                     <div v-else>\n                       <h2 class=\"resetSucess-title\">设置失败!</h2>\n                       <div class=\"loginInfo-part\">\n                           <img id=\"loginInfo-part-icon\" src=\"../assets/imgs/mylogin/errorinfo.png\" alt=\"\">\n                           <span id=\"loginInfo-part-text\">请返回重新设置新密码!</span>\n                       </div>\n                       <el-button class=\"login-Btn\" @click=\"backResetHandle\">返回</el-button> \n                        <div class=\"bottomAside\">\n                            <span class=\"changeTitle\">切换至：</span>\n                            <a class=\"cutMerchant\" >承总商后台</a>\n                            <a class=\"cutBusiness\" >商户后台</a>\n                        </div>                     \n                     \n                     </div>                                                                 \n                    </div>\n                                      \n                </el-col>\n            </el-row>\n        </div>\n    </div>\n    <div v-else class=\"login contractor-login\" >\n        <div class=\"login-wrap\">\n            <el-row class=\"main-wrap\">\n               <el-col :span=\"10\" id=\"wrap-left\">\n               </el-col>\n               <el-col :span=\"14\" id=\"wrap-right\">\n                   <div v-if=\"!resetflag\" class=\"login-form-wrap\">\n                       <h2 class=\"login-title\">Stark</h2>\n                       <span class=\"login-subTitle\">Stark承兑支付系统 - 承兑商</span>\n                       <el-form class=\"login-form\" ref=\"form\"  :rules=\"rules\" :model=\"form\">\n                            <el-form-item prop=\"userName\">\n                                 <el-input v-model=\"form.userName\" placeholder=\"请输入账号/手机号\"></el-input>\n                            </el-form-item>\n                            <el-form-item prop=\"password\">\n                                 <el-input v-model=\"form.password\" placeholder=\"请输入密码\"></el-input>\n                            </el-form-item>\n                        <div class=\"userOptions\">\n                           <span id=\"forgetPwd\" @click=\"forgetPwdHandle\">忘记密码？</span>    \n                           <el-checkbox  v-model=\"form.checked\">记住密码</el-checkbox>                           \n                       </div>\n                       <el-form-item>\n                         <el-button class=\"login-Btn\">登录</el-button>\n                       </el-form-item>\n                       </el-form>\n                   </div>\n                   <div v-else-if=\"resetflag\" class=\"login-form-wrap\">    \n                     <div v-if=\"resetStatus===''\">\n                        <h2 class=\"login-subTitle\">设置新密码</h2>\n                        <el-form  class=\"login-form\" ref=\"resetForm\" label-position=\"left\" label-width=\"6.42vw\"\n                           :rules=\"resetRules\" :model=\"resetForm\">\n                             <el-form-item prop=\"userName\"  label=\"账号：\">\n                                  <el-input v-model=\"resetForm.userName\" placeholder=\"请输入账号/手机号\"></el-input>\n                             </el-form-item>\n                             <el-form-item prop=\"password\" label=\"新密码：\">\n                                  <el-input v-model=\"resetForm.password\" placeholder=\"新密码\"></el-input>\n                             </el-form-item>\n                             <el-form-item prop=\"newPassword\" label=\"重输新密码：\">\n                                  <el-input v-model=\"resetForm.newPassword\" placeholder=\"请重新输入设置的新密码\"></el-input>\n                             </el-form-item>\n                             <el-form-item prop=\"verifyCode\" label=\"验证码：\" class=\"verifyCodePart\">\n                                  <el-input v-model=\"resetForm.verifyCode\" class=\"verifyCode-input\" placeholder=\"请输入收到的验证码\"></el-input>\n                                  <el-button v-if=\"!awardCodeBtnRun\" class=\"sys-Btn\" size=\"mini\" @click=\"awardCode\" >{{codeTxt}}</el-button>\n                                  <el-button v-else class=\"awardCode-Btn awardCode-Btn-run\" size=\"mini\">重新获取({{count}})s</el-button>\n                             </el-form-item>\n                            <el-form-item label-width=\"0px\">\n                             <el-button class=\"login-Btn\" @click=\"resPwdHandle\">确认</el-button>\n                            </el-form-item> \n                        </el-form> \n                        <div class=\"bottomAside\">\n                            <span class=\"changeTitle\">切换至：</span>\n                            <a class=\"cutMerchant\" href=\"#\">承总商后台</a>\n                            <a class=\"cutBusiness\" href=\"#\">商户后台</a>\n                        </div>                                              \n                     </div>\n                      <div v-else-if=\"resetStatus\">\n                        <h2 class=\"resetSucess-title\">设置成功!</h2>\n                        <div class=\"loginInfo-part\">\n                          <img id=\"loginInfo-part-icon\" src=\"../assets/imgs/mylogin/succinfo.png\" alt=\"\">\n                          <span id=\"loginInfo-part-text\">新密码设置成功</span>\n                        </div>\n                      <el-button class=\"login-Btn\" @click=\"resetSuccHandle\">去登录</el-button> \n                      <div class=\"bottomAside\">\n                            <span class=\"changeTitle\">切换至：</span>\n                            <a class=\"cutMerchant\" href=\"#\">承总商后台</a>\n                            <a class=\"cutBusiness\" href=\"#\">商户后台</a>\n                      </div>                     \n                     </div> \n                     <div v-else>\n                       <h2 class=\"resetSucess-title\">设置失败!</h2>\n                       <div class=\"loginInfo-part\">\n                           <img id=\"loginInfo-part-icon\" src=\"../assets/imgs/mylogin/errorinfo.png\" alt=\"\">\n                           <span id=\"loginInfo-part-text\">请返回重新设置新密码!</span>\n                       </div>\n                       <el-button class=\"login-Btn\" @click=\"backResetHandle\">返回</el-button> \n                        <div class=\"bottomAside\">\n                            <span class=\"changeTitle\">切换至：</span>\n                            <a class=\"cutMerchant\" @click='curContractor>承总商后台</a>\n                            <a class=\"cutBusiness\" >商户后台</a>\n                        </div>                     \n                     \n                     </div>                                                                 \n                    </div>\n                                      \n                </el-col>\n            </el-row>\n        </div>\n    </div>\n    </div>\n\n</template>\n<script>  \nimport { nextTick } from 'q';\nimport { constants } from 'crypto';\nexport default {\n    data () {\n        let validatorUserName = (rule, value, callback)=> {\n            if(value =='')\n            {\n                return callback(new Error('请输入账号/手机号'))\n            }\n            else\n            {\n              const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/\n              if(reg.test(value))\n              {\n                    callback();\n                }\n                else\n                {\n                    return callback(new Error('账号/手机号格式不正确'))\n                }\n            }\n        }\n        \n        let validatorNewPwd = (rule, value, callback)=> {\n            if (value === '') {\n               callback(new Error(\"请再次输入新密码\")) \n            } else if(value !== this.form.password){\n                callback(new Error(\"两次输入的密码不正确\"))\n            } else {\n                callback()\n            }\n        }\n        return {\n            resetflag: false,\n            role: 'stark',\n            resetStatus: '',\n            timer:null,\n            awardCodeBtnRun: false,\n            codeTxt:\"获取验证码\",\n            count: '',\n            form:{\n                userName:'',\n                password:'',\n                checked:false\n            },\n            rules:{\n                userName:[\n                    { validator: validatorUserName, trigger: 'blur' },\n                ],\n                password:[\n                    { required: true, message: '请输入密码', trigger: 'blur' },\n                ]                \n            },\n            resetForm:{\n                userName:'',\n                password:'',\n                newPassword:'',\n                verifyCode:'',\n            },\n            resetRules:{\n                userName:[\n                    { validator: validatorUserName, trigger: 'blur' },\n                ],\n                password:[\n                    { message: '请输入新密码', trigger: 'blur' },\n                ],\n                newPassword:[\n                    {required: true, validator: validatorNewPwd, trigger: 'blur' },\n                ],\n                verifyCode:[\n                    { required: true, message: '请输入验证码', trigger: 'blur' },\n                ]                \n            }\n        }\n    },\n    methods: {\n        /*\n        **确定重设密码事件\n        */      \n        forgetPwdHandle() {\n            this.resetflag = true\n            this.resetStatus = ''\n            this.$nextTick(()=>{\n              this.$refs.resetForm.resetFields()\n            })\n            // console.log(this.$refs)\n        },\n        //获取验证码事件\n        awardCode(){\n            this.awardCodeBtnRun = true\n            const Time_COUNT = 60;\n            if(!this.timer)\n            {\n                this.count = Time_COUNT;\n                this.timer = setInterval(()=>{\n                    if(this.count>0 && this.count <= Time_COUNT)\n                    {\n                        this.count --;\n                    }\n                    else\n                    {\n                        this.awardCodeBtnRun = false\n                        clearInterval(this.timer)\n                        this.timer = null\n                        this.codeTxt = \"重新获取\";\n                    }\n                }, 1000)\n            }\n        },\n        /*\n        **确定重设密码事件\n        */\n        resPwdHandle(){\n          if(true)\n          {\n            //重设成功\n            this.resetStatus = true\n          }\n          else\n          {\n            //重设失败\n            this.resetStatus = false\n          }\n        },\n        /*\n        **重设成功返回登录事件\n        */ \n        resetSuccHandle(){\n          this.resetStatus = ''\n          this.resetflag = false\n         \n        },        \n        /*\n        **返回重设密码事件\n        */        \n        backResetHandle(){\n          this.resetStatus = ''\n          this.resetflag = true\n        },\n        /*\n        **登录事件\n        */\n        handleLogin(){\n            let _this = this\n            let config = {\n                method: \"POST\",\n                data: _this.$qs.stringify({\n                    username: _this.form.userName,\n                    password: _this.form.password,\n                    platform: _this.role   \n                }),\n                url: `${_this.common.basePath}/login.api`\n            }\n            this.axios(config).then((result) => {\n                if(result.code===200)\n                {\n                    let userId = result.data.userId\n                    let platform = result.data.platform\n                    document.getElementById('app').className = _this.handleRoleInTheme(platform)\n                    console.log(_this.handleRoleInTheme(platform))\n                    localStorage.setItem(\"theme\", _this.handleRoleInTheme(platform))\n                    _this.$router.push({name: \"dataStatic\"});\n                }\n            }).catch((err) => {\n                _this.$message.error(err.msg)\n            });\n        },\n        /*\n        **角色匹配不同Theme\n        */\n        handleRoleInTheme(plateform){\n            switch (plateform) {\n                case 'acceptance':\n                    return 'themeb'\n                    break;\n                default:\n                    return 'themea'\n                    break;\n            }\n        }\n    },\n}\n</script>\n<style lang=\"less\" scoped>\n@platformLoginbkg: url(../assets/imgs/mylogin/bg.png);\n@contractorLoginbkg: url(../assets/imgs/mylogin/bg1.png);\n \n\n .login{\n     display: flex;\n     align-items: center;\n     justify-content: center;\n     width: 100vw;\n     height: 100vh;\n     background-size: 100% 100%;\n     .login-wrap{\n     width: 60vw;\n     height: 70vh;\n     box-shadow:0px 0px 30px 0px rgba(0,0,0,0.1);\n         .main-wrap\n         {\n             width: 100%;\n             height: 100%;\n         }\n         #wrap-left,#wrap-right{\n             height: 100%;  \n         }\n         #wrap-left{\n             background: url(../assets/imgs/mylogin/leftlogo.png) no-repeat ; \n             background-size: 100% 100%;\n         }\n         #wrap-right{\n             padding-left: 6.4vw;\n             padding-top: 5.5vh;\n             padding-right: 6.9vw;\n             background-color: #fff;\n             .login-form-wrap{\n                 .login-title{\n                     margin: 0;\n                     margin-bottom: 6.5vh;\n                     font-size: 2.5rem;\n                     font-family: PingFangSC-Semibold;\n                     color: #3126B0;\n                 }\n                 .login-subTitle{\n                     color: #333333;\n                     font-size: 1.25rem;\n                 }\n                .login-form{\n                    margin-top: 6.5vh;\n                 .verifyCodePart{\n                   .el-form-item__content{\n                       position: relative;\n                  }\n                 }\n                 .verifyCode-input{\n                     width: 50%;\n                 }\n                 .awardCode-Btn-run{\n                     padding-left: 2px;\n                     padding-right: 2px; \n                     background-color: #CCCCCC;\n                 }\n                }\n                .userOptions{\n                    display: flex;\n                    justify-content: space-between;\n                    margin-top: 5vh;\n                    span{\n                        font-size: .8125rem;\n                    }\n                    #forgetPwd{\n                        text-decoration: underline;\n                        color: #3126B0;\n                    }\n                    #forgetPwd:hover{\n                        cursor: pointer;\n                    }\n                }\n             }\n             .login-Btn{\n               width: 8vw;\n               height: 6.2vh;\n               cursor: pointer;\n               text-align: center;\n               padding: 0;\n               border: none;\n               border-radius: 0;\n               font-weight: normal;\n               margin-top: 3.8vh;\n               font-size: 1.2rem !important;\n               color: #fff;\n               border-radius: 1.25rem 0 1.25rem 1.25rem;\n                      background: linear-gradient(to right, #B4EC51 , #53A0FD);              \n           } \n          .resetSucess-title\n          {\n             font-size: 1.25rem;\n             margin-bottom: 14vh;\n          }\n          .loginInfo-part{\n              display: flex;\n              align-items: center;\n              margin-bottom: 18vh;\n              #loginInfo-part-icon{\n                  width: 3vw;\n                  height: 3vw;\n                  margin-right: 1.5vw;\n              }\n              #loginInfo-part-text{\n                  color: #333333;\n                  font-size: .875rem;\n              }\n          }\n          .bottomAside{\n              position: absolute;\n              right: 2vw;\n              bottom: 1.3vw;\n              font-size: .875rem;\n              \n              .changeTitle{\n                  color: #999999;\n              }\n              a{\n                  color: #4A90E2;\n              }\n              .cutMerchant{\n                  margin-left: 1vw;\n              }\n              .cutBusiness{\n                  margin-left: 1.2vw;\n              }\n          }          \n         }\n     }\n }\n .sys-Btn{\n     background-color: #54B3D9;\n }\n .plateform-login{\n   background: @platformLoginbkg fixed top no-repeat;     \n }\n .contractor-login{\n   background: @contractorLoginbkg fixed top no-repeat;\n}\n</style>\n<style lang=\"less\">\n .login{\n     .login-form {\n         .el-form-item {\n          margin-bottom: 2vh;\n          input{\n             padding: 0;\n             height: 3.5vh;\n             border: none;\n             border-bottom: 1px solid #B3B3B3;\n             border-radius: 0;\n             font-size: .75rem;\n             background: none;\n             }\n             .el-form-item__label::before{\n                 content: '';\n                 margin: 0;\n             }\n             .el-form-item__label{\n                 font-size: .8125rem;\n             }\n         }\n          .awardCode-Btn{\n              width: 30%;\n              position: absolute;\n              right: 0;\n              bottom: 0.2vh;\n              text-align: center;\n              border: none;\n              border-radius: 0;\n              font-size: .625rem !important;\n              color: #fff;\n              background-color: #8BCC9A;\n           }\n\n     }\n\n }\n</style>\n",null]}