{"remainingRequest":"/Users/mac/Desktop/222/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/222/src/views/settings/components/UserManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/222/src/views/settings/components/UserManage.vue","mtime":1561101055000},{"path":"/Users/mac/Desktop/222/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/222/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/222/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/222/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Promise } from 'q';\nexport default {\n  data() {\n    return {\n            addUserDialog: false,\n            isEdit: false,\n            addform: {\n              name: '',\n              telephone: '',\n              role: '',\n              password: '',\n              password2: ''\n            },\n             defaultProps: {\n             children: 'children',\n             label: 'label'\n            },\n            id: 0,\n            roleList: [],\n            userList: [],\n            tree:[{\n                label: \"STARK公司\",\n                children: [{\n                    label: \"运营\",\n                    children: [{\n                        label: \"墨鱼\"\n                    }]\n                }]\n            }],\n            condition:{\n              keyword: ''\n            },            \n    }\n  },\n  methods: {\n      handleNodeClick(data){\n       console.log(data);\n      },\n      handleSearchClick(){\n\n      },\n      /*\n      **获取管理员列表\n      */\n      async _getUserList(condition){\n        let _condition = condition\n        let resData = await this.http.get('/platformUser/lists',_condition)\n        if(resData.code === 200){\n          this.userList = resData.data\n        }\n      },\n      /*\n      **获取角色列表\n      */\n      async _getRoleList(){\n        let resData = await this.http.get('/platformUser/searchRole')\n        if(resData.code === 200){\n          this.roleList = resData.data\n        }\n      },\n      /*\n      **点击新增用户\n      */\n      async handleClickAddUser(){\n        await this._getRoleList()\n        this.addUserDialog = true\n      },\n      /*\n      **新增用户\n      */\n     async addUser(){\n      let data = {\n        username: this.addform.name,\n        tel: this.addform.telephone,\n        roleId: this.addform.role,\n        password: this.addform.password,\n        repassword: this.addform.password2\n      }\n      let resData = await this.http.post('/platformUser/createNewUser', data)\n      if(resData.code === 200){\n        this.$message.success(resData.msg)\n        await this._getUserList(this.condition)\n        this.addUserDialog = false\n      }\n     },\n     /*\n     **编辑用户\n     */\n    async editUser(index){\n      await this._getRoleList()\n      this.isEdit = true\n      this.id = this.userList[index].id\n      this.addform.name = this.userList[index].username\n      this.addform.telephone = this.userList[index].tel\n      this.addform.role  = this.userList[index].roleId\n      this.addUserDialog = true\n      \n    },\n    /*\n    **确定修改用户\n    */\n   async confirmEditUser(){\n       let data = {\n         id: this.id,\n         tel: this.addform.telephone,\n         roleId: this.addform.role,\n         password: this.addform.password,\n         repassword: this.addform.password2,\n       }\n       let resData = await this.http.post('/platformUser/updateUser.api', data)\n       if(resData.code === 200){\n         this.$message.success(resData.msg)\n         await this._getUserList(this.condition)\n         this.addUserDialog = false\n       } \n   },\n     /*\n     **新增用户模态框关闭\n     */\n     addUserDialogClose(){\n       this.addform = {\n              name: '',\n              telephone: '',\n              role: '',\n              password: '',\n              password2: ''\n            },\n       this.$refs.addform.resetFields()\n     },\n     /*\n     **冻结用户\n     */\n    async frozenUser(id){\n      let _id = id\n      let resData = await this.http.get('/platformUser/frozenUser.api', {id: _id})\n      if(resData.code === 200){\n        this.$message.success(resData.msg)\n        this.condition.keyword = ''\n        await this._getUserList(this.condition)\n      }\n    },\n     /*\n     **启用用户\n     */\n    async enAbleUser(id){\n      let _id = id\n      let resData = await this.http.get('/platformUser/enableUser.api', {id: _id})\n      if(resData.code === 200){\n        this.$message.success(resData.msg)\n        this.condition.keyword = ''\n        await this._getUserList(this.condition)\n      }\n    }\n  },\n  async mounted() {\n    await this._getUserList(this.condition)\n  },\n  \n}\n",{"version":3,"sources":["UserManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"UserManage.vue","sourceRoot":"src/views/settings/components","sourcesContent":["<template>\n  <div>\n                   <div class=\"contain-footer-top\">\n                    <div class=\"contain-footer-topl\">                    \n                      <el-button class=\"sys-Btn\" @click=\"handleClickAddUser\"  type=\"primary\">新增用户</el-button>\n                      <el-button class=\"sys-Btn\" type=\"primary\">批量导入</el-button>\n                    </div>\n                    <div class=\"contain-footer-topr\">  \n                      <el-input v-model=\"condition.keyword\" class=\"searchTool\" placeholder=\"请输入用户名称或手机号\">\n                            <i\n                             class=\"el-icon-search el-input__icon\"\n                             slot=\"suffix\"\n                             @click=\"handleSearchClick\">\n                            </i>\n                      </el-input>                                          \n                    </div>                        \n                  </div>\n                  <div class=\"contain-footer-bottom\">\n                      <el-row :gutter=\"10\">\n                          <el-col :span=\"24\">\n                                <el-table\n                                  :data=\"userList\"\n                                  size=\"medium\"\n                                  :fit=\"true\"\n                                  border\n                                  style=\"width: 100%\">\n                                  <el-table-column\n                                    align=\"center\"\n                                    prop=\"username\"\n                                    label=\"姓名\"\n                                    width=\"180\">\n                                  </el-table-column>\n                                  <!-- <el-table-column\n                                    align=\"center\"\n                                    prop=\"department\"\n                                    label=\"部门\"\n                                    width=\"180\">\n                                  </el-table-column> -->\n                                  <el-table-column\n                                    align=\"center\"\n                                    prop=\"tel\"\n                                    label=\"手机号\">\n                                  </el-table-column>\n                                  <el-table-column\n                                    align=\"center\"\n                                    prop=\"role\"\n                                    label=\"角色\">\n                                  </el-table-column>\n                                  <el-table-column\n                                    align=\"center\"\n                                    prop=\"status\"\n                                    label=\"状态\">\n                                    <template slot-scope=\"scope\">\n                                      {{scope.row.status?'正常':'禁用'}}\n                                    </template>\n                                  </el-table-column>\n                                  <el-table-column\n                                    align=\"center\"\n                                    label=\"操作\"\n                                    width=\"180\">\n                                      <template slot-scope=\"scope\">\n                                        <el-button class=\"sys-text-Btn\"  type=\"text\" @click=\"editUser(scope.$index)\" size=\"small\">编辑</el-button>\n                                        <el-button v-if=\"scope.row.status\" class=\"sys-text-Btn\" type=\"text\" @click=\"frozenUser(scope.row.id)\" size=\"small\">禁用</el-button>\n                                        <el-button v-else class=\"sys-text-Btn\" type=\"text\" @click=\"enAbleUser(scope.row.id)\"  size=\"small\">启用</el-button>\n                                        <el-button class=\"sys-text-Btn\" type=\"text\" size=\"small\">删除</el-button>\n                                      </template>                                    \n                                  </el-table-column>                                                                                                       \n                                </el-table>\n                          </el-col>\n                      </el-row>\n                  </div>  \n      <el-dialog class=\"dialog\" \n           :title=\"isEdit?'修改用户':'新增用户'\"\n           :visible.sync=\"addUserDialog\"\n           width=\"23%\"\n           @close=\"addUserDialogClose\"\n           >\n             <el-form :model=\"addform\"  ref=\"addform\" label-width=\"auto\" size=\"medium\" label-position=\"right\" class=\"demo-ruleForm\">\n               <el-form-item label=\"姓名\"  prop=\"name\">\n                 <el-input   v-model=\"addform.name\"></el-input>\n               </el-form-item>\n               <el-form-item label=\"手机号\" prop=\"telephone\">\n                 <el-input v-model=\"addform.telephone\"></el-input>  \n               </el-form-item>\n                <el-form-item label=\"所有角色\" prop=\"role\">\n                    <el-select v-model=\"addform.role\" placeholder=\"请选择角色\">\n                      <el-option v-for=\"role in roleList\" :key=\"role.id\" :label=\"role.roleName\" :value=\"role.id\"></el-option>\n                    </el-select>\n                </el-form-item>\n                <template >\n                   <el-form-item label=\"密码\" prop=\"password\">\n                    <el-input v-model=\"addform.password\"></el-input>  \n                   </el-form-item>\n                   <el-form-item label=\"确认密码\" prop=\"password2\">\n                    <el-input v-model=\"addform.password2\"></el-input>  \n                   </el-form-item>  \n                </template>\n              \n             </el-form>\n           <span slot=\"footer\" class=\"dialog-footer\">\n             <el-button v-if=\"!isEdit\"  class=\"sys-Btn\" type=\"primary\" @click=\"addUser\">确 定</el-button>\n             <el-button v-else  class=\"sys-Btn\" type=\"primary\" @click=\"confirmEditUser\">确 定</el-button>                  \n             <el-button @click=\"addUserDialog = false\">取 消</el-button>\n           </span>\n        </el-dialog>                     \n  </div>\n</template>\n<script>\nimport { Promise } from 'q';\nexport default {\n  data() {\n    return {\n            addUserDialog: false,\n            isEdit: false,\n            addform: {\n              name: '',\n              telephone: '',\n              role: '',\n              password: '',\n              password2: ''\n            },\n             defaultProps: {\n             children: 'children',\n             label: 'label'\n            },\n            id: 0,\n            roleList: [],\n            userList: [],\n            tree:[{\n                label: \"STARK公司\",\n                children: [{\n                    label: \"运营\",\n                    children: [{\n                        label: \"墨鱼\"\n                    }]\n                }]\n            }],\n            condition:{\n              keyword: ''\n            },            \n    }\n  },\n  methods: {\n      handleNodeClick(data){\n       console.log(data);\n      },\n      handleSearchClick(){\n\n      },\n      /*\n      **获取管理员列表\n      */\n      async _getUserList(condition){\n        let _condition = condition\n        let resData = await this.http.get('/platformUser/lists',_condition)\n        if(resData.code === 200){\n          this.userList = resData.data\n        }\n      },\n      /*\n      **获取角色列表\n      */\n      async _getRoleList(){\n        let resData = await this.http.get('/platformUser/searchRole')\n        if(resData.code === 200){\n          this.roleList = resData.data\n        }\n      },\n      /*\n      **点击新增用户\n      */\n      async handleClickAddUser(){\n        await this._getRoleList()\n        this.addUserDialog = true\n      },\n      /*\n      **新增用户\n      */\n     async addUser(){\n      let data = {\n        username: this.addform.name,\n        tel: this.addform.telephone,\n        roleId: this.addform.role,\n        password: this.addform.password,\n        repassword: this.addform.password2\n      }\n      let resData = await this.http.post('/platformUser/createNewUser', data)\n      if(resData.code === 200){\n        this.$message.success(resData.msg)\n        await this._getUserList(this.condition)\n        this.addUserDialog = false\n      }\n     },\n     /*\n     **编辑用户\n     */\n    async editUser(index){\n      await this._getRoleList()\n      this.isEdit = true\n      this.id = this.userList[index].id\n      this.addform.name = this.userList[index].username\n      this.addform.telephone = this.userList[index].tel\n      this.addform.role  = this.userList[index].roleId\n      this.addUserDialog = true\n      \n    },\n    /*\n    **确定修改用户\n    */\n   async confirmEditUser(){\n       let data = {\n         id: this.id,\n         tel: this.addform.telephone,\n         roleId: this.addform.role,\n         password: this.addform.password,\n         repassword: this.addform.password2,\n       }\n       let resData = await this.http.post('/platformUser/updateUser.api', data)\n       if(resData.code === 200){\n         this.$message.success(resData.msg)\n         await this._getUserList(this.condition)\n         this.addUserDialog = false\n       } \n   },\n     /*\n     **新增用户模态框关闭\n     */\n     addUserDialogClose(){\n       this.addform = {\n              name: '',\n              telephone: '',\n              role: '',\n              password: '',\n              password2: ''\n            },\n       this.$refs.addform.resetFields()\n     },\n     /*\n     **冻结用户\n     */\n    async frozenUser(id){\n      let _id = id\n      let resData = await this.http.get('/platformUser/frozenUser.api', {id: _id})\n      if(resData.code === 200){\n        this.$message.success(resData.msg)\n        this.condition.keyword = ''\n        await this._getUserList(this.condition)\n      }\n    },\n     /*\n     **启用用户\n     */\n    async enAbleUser(id){\n      let _id = id\n      let resData = await this.http.get('/platformUser/enableUser.api', {id: _id})\n      if(resData.code === 200){\n        this.$message.success(resData.msg)\n        this.condition.keyword = ''\n        await this._getUserList(this.condition)\n      }\n    }\n  },\n  async mounted() {\n    await this._getUserList(this.condition)\n  },\n  \n}\n</script>\n<style lang=\"less\" scoped>\n.contain-footer-topr{\n    .searchTool{\n        margin-right: 0;\n    }\n}\n.contain-footer-bottom{\n    #organiztion-struct{\n        min-height: 45vh;\n        border: 1px solid #E6E6E6;\n        #organiztion-struct-top{\n            height: 4vh;\n            line-height: 4vh;\n            border-bottom: 1px solid #E6E6E6;\n            #organiztion-struct-title{\n                margin-left: 0.6vw;\n                font-size: .875rem;\n                color: #333333;\n            }\n        }\n        #organiztion-struct-tree{\n            margin-top: 1.5vh;\n            font-size: .875rem;\n            \n            .el-tree{\n                color: #333333;\n            }\n        }\n    }\n .contain-footer-bottom-l{\n     height: 7.5rem;\n\n }\n .contain-footer-bottom-r{\n     height: 7.5rem;\n }\n}\n</style>\n\n\n"]}]}