{"remainingRequest":"/Users/yuanbo/Desktop/与燕/222/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!/Users/yuanbo/Desktop/与燕/222/src/views/business/components/BusinessList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuanbo/Desktop/与燕/222/src/views/business/components/BusinessList.vue","mtime":1560753497027},{"path":"/Users/yuanbo/Desktop/与燕/222/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuanbo/Desktop/与燕/222/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuanbo/Desktop/与燕/222/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuanbo/Desktop/与燕/222/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { async } from 'q';\nexport default {\n    data() {\n        return {\n            dialogVisible: false,\n            commisionDialog: false,\n            userState:'',\n            isEdit: false,\n            total: 0,\n            condition: {\n               keyword: '',\n               page:1,\n               type:1\n            },\n            businessList: [],\n            buisform: {\n                account:'',\n                businessName: '',\n                industry: '',\n                password: '',\n                password2: '',\n                id:0\n            },\n            commisionForm: {\n                account: '',\n                rate: ''\n            },\n            buisRules:{\n              account: [\n                  { required: true, message: '请输入账号', trigger: 'blur' },\n              ],\n              businessName: [\n                  { required: true, message: '请输入商户名称', trigger: 'blur' },\n              ],   \n              industry:[\n                  { required: true, message: '请选择行业', trigger: 'blur' },\n              ],\n              password:[\n                  { required: true, message: '请输入密码', trigger: 'blur' },                  \n              ],                          \n              password2:[\n                  { required: true, message: '请再次输入密码', trigger: 'blur' },                  \n              ] \n            },\n            commisionRules: {\n              account: [\n                  { required: true, message: '请输入用户名', trigger: 'blur' },\n              ],\n              rate: [\n                  { required: true, message: '请输入佣金比例', trigger: 'blur' },\n              ],                   \n            },            \n        }\n    },\n    methods: {\n        async handleSearchClick(){\n          await this._getBusinessList(this.condition)\n        },\n        handleViewData(account) {\n           this.$router.push({name: 'busiDataStatistic', query: {id: 25}})\n        },\n        async handleAddBusiness(){\n          let body = {\n            tel: this.buisform.account,\n            platformName: this.buisform.businessName,\n            industry: this.buisform.industry,\n            password: this.buisform.password,\n            repassword: this.buisform.password2,\n            platform: 2\n          }\n          let resData = await this.http.post(`${this.common.basePath}/platform/createNewPlatform.api`, body)\n          if(resData.code === 200)\n          {\n            this.$message.success(resData.msg)\n            this.dialogVisible = false\n\n          }\n        },\n        /*\n        **网络获取商户列表\n        */\n        async _getBusinessList(condition){\n          let _condition = condition\n          let resData = await this.http.get('/platform/merchantLists', _condition)\n           this.businessList = resData.data\n           this.condition.page = resData.current_page\n           this.total = resData.total\n        },\n        /*\n         **处理冻结平台账户事件\n         */\n       async handleFrozenAccount(id, index){\n         let _index = index\n         let platformId = id\n         let resData = await this.http.get('/platform/frozenPlatform', {id: platformId})\n         if(resData.code===200)\n         {\n           this.$message.success(\"禁用成功\")\n           this.businessList[_index].isFrozen = true\n           this.businessList[_index].isActive = false\n         }\n        }, \n        /*\n         **启动平台账户事件\n         */\n        async enableAccount(id) {\n          let _id = id\n          let resData = await this.http.get('/platform/enablePlatform', {id: _id})\n          if(resData.code === 200){\n            this.$message.success(resData.msg)\n            await this._getBusinessList(this.condition)\n          }\n        },\n       /*\n       **处理确定设置佣金事件\n       */\n       async handleConfirmSetCommis(){\n         let param = {\n           type: 1,\n           tel: this.commisionForm.account,\n           proportion: this.commisionForm.rate\n         }\n         let resData = await this.http.get('/platform/setMerchantComsion', param)\n         if(resData.code == 200)\n         {\n\n           this.$message.success(resData.msg)\n           this.commisionDialog = false\n         }\n       }, \n        /*\n        **处理分页当前页改变事件\n        */\n       handleCurrentchange(val) {\n         this.condition.page = val\n         this._getBusinessList(this.condition)\n       },\n        /*\n        **处理slect选择事件\n        */       \n       async handleSelectChange(val){\n         let _val = val;\n         this.condition.type = _val\n         await this._getBusinessList(this.condition)\n       },\n        /*\n        **编辑商户\n        */        \n       async handleEdit(id) {\n         let _id = id\n         this.isEdit = true\n         this.dialogVisible = true\n         let resData = await this.http.get('/platform/merchantDetail', {id: _id})\n         this.buisform.industry = resData.industry\n         this.buisform.businessName = resData.platformName\n         this.buisform.account = resData.tel\n         this.buisform.id = _id\n       },\n        /*\n        **确认修改商户\n        */ \n       async handleAConfirmEditBusiness() {\n         let data = {\n           id: this.buisform.id,\n           tel: this.buisform.account,\n           platformName: this.buisform.businessName,\n           industry: this.buisform.industry,\n           password: this.buisform.password,\n           repassword: this.buisform.password2\n         }\n         let resData = await this.http.post('/platform/editMerchant', data)\n         if(resData.code === 200){\n           this.$message.success(resData.msg)\n           await this._getBusinessList(this.condition)\n           this.dialogVisible = false\n         }\n    \n\n       },\n       /*\n       **取消增加/修改商户\n       */\n       concealDialog() {\n         this.dialogVisible = false\n         this.$refs.buisform.resetFields()\n       }\n    },\n    async mounted() {\n      await this._getBusinessList(this.condition)\n    },\n}\n",{"version":3,"sources":["BusinessList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BusinessList.vue","sourceRoot":"src/views/business/components","sourcesContent":["<template>\n    <div>\n      <div class=\"contain-footer-top\">\n        <div class=\"contain-footer-topl\">                    \n          <el-button class=\"sys-Btn\" @click=\"dialogVisible = true\" type=\"primary\">新增商户</el-button>\n        </div>\n        <div class=\"contain-footer-topr\">\n          <el-select v-model=\"userState\" class=\"user-state-input\" @change=\"handleSelectChange\"  placeholder=\"状态\">\n             <el-option label=\"全部\" value=\"1\"></el-option>\n             <el-option label=\"已激活\" value=\"2\"></el-option>\n             <el-option label=\"未激活\" value=\"3\"></el-option>\n          </el-select>  \n          <el-input v-model=\"condition.keyword\" class=\"searchTool\">\n                <i\n                 class=\"el-icon-search el-input__icon\"\n                 slot=\"suffix\"\n                 @click=\"handleSearchClick\">\n                </i>\n          </el-input>                                          \n        </div>                        \n      </div>\n      <div class=\"contain-footer-bottom\">\n            <el-table\n                :data=\"businessList\"\n                border\n                style=\"width: 100%\">\n                <el-table-column align=\"center\"\n                  type=\"index\"\n                  label=\"ID\"\n                  width=\"80\">\n                </el-table-column>  \n                <el-table-column\n                  prop=\"account\"\n                  label=\"账号\"\n                  min-width=\"140\"\n                  align=\"center\">                      \n                </el-table-column>\n                <el-table-column\n                  prop=\"name\"\n                  label=\"商户名称\"\n                  width=\"100\"\n                  align=\"center\">\n                </el-table-column>\n                <el-table-column\n                  prop=\"company\"\n                  label=\"用户类型\"\n                  align=\"center\"\n                  width=\"80\">\n                </el-table-column>\n                <el-table-column\n                  prop=\"channelName\"\n                  label=\"所属渠道商\"\n                  align=\"center\"\n                  min-width=\"120\">\n                </el-table-column>\n                <el-table-column\n                  prop=\"registerTime\"\n                  label=\"注册时间\"\n                  align=\"center\"\n                  min-width=\"180\">\n                </el-table-column>                    \n                <el-table-column\n                  label=\"操作\"\n                  align=\"center\"\n                  min-width=\"220\">\n                  <template slot-scope=\"scope\">\n                      <el-button style=\"sys-text-Btn\" size=\"small\" @click=\"handleEdit(scope.row.id)\" type=\"text\">编辑</el-button>\n                      <el-button style=\"sys-text-Btn\" size=\"small\" @click=\"commisionForm.account=scope.row.account;commisionDialog = true\" type=\"text\">设置手续费</el-button>\n                      <el-button style=\"sys-text-Btn\" size=\"small\" type=\"text\" @click=\"handleViewData(scope.row.account)\">数据统计</el-button>\n                      <el-button v-if=\"scope.row.isFrozen\" @click=\"enableAccount(scope.row.id)\"  size=\"mini\" type=\"success\">启用</el-button>\n                      <el-button v-else @click=\"handleFrozenAccount(scope.row.id, scope.$index)\"   size=\"mini\" type=\"danger\">禁用账户</el-button>\n                  </template>\n                </el-table-column>\n                <el-table-column\n                  label=\"账号状态\"\n                  align=\"center\"\n                  width=\"150\">\n                  <template slot-scope=\"scope\">\n                      <span v-if=\"scope.row.isActive\" class=\"activeBtn\" type=\"text\">激活</span>\n                      <span v-else type=\"text\" clas=\"no-activeBtn\">未激活</span>\n                  </template>\n                </el-table-column>                                                                                                 \n            </el-table>\n      </div>\n      <el-pagination\n          class=\"pagination\"\n          background\n          layout=\"prev, pager, next\"\n          :hide-on-single-page=\"total<=15\"\n          @current-change=\"handleCurrentchange\"\n          :current-page = \"condition.page\"\n          :page-size=\"15\"\n          :total=\"total\">\n      </el-pagination>\n      <div style=\"clear:both;\"></div>       \n      <el-dialog class=\"dialog\" id=\"addBuisDialog\"\n           :title=\"isEdit?'修改商户':'新增商户'\"\n           :visible.sync=\"dialogVisible\"\n           width=\"23%\"\n           >\n             <el-form :model=\"buisform\" :rules=\"buisRules\" ref=\"buisform\" label-width=\"auto\" size=\"medium\" label-position=\"right\" class=\"demo-ruleForm\">\n               <el-form-item label=\"账号\" prop=\"account\">\n                 <el-input v-model=\"buisform.account\"></el-input>\n               </el-form-item>\n               <el-form-item label=\"商户名称\" prop=\"businessName\">\n                 <el-input v-model=\"buisform.businessName\"></el-input>  \n               </el-form-item>\n                <el-form-item label=\"行业\" prop=\"industry\">\n                    <el-select v-model=\"buisform.industry\" placeholder=\"请选择行业\">\n                      <el-option label=\"金融\" value=\"金融\"></el-option>\n                      <el-option label=\"其他\" value=\"其他\"></el-option>\n                    </el-select>\n                </el-form-item>\n                <el-form-item label=\"密码\" prop=\"password\">\n                 <el-input v-model=\"buisform.password\"></el-input>  \n               </el-form-item>\n                <el-form-item label=\"确认密码\" prop=\"password2\">\n                 <el-input v-model=\"buisform.password2\"></el-input>  \n               </el-form-item>               \n             </el-form>\n           <span slot=\"footer\" class=\"dialog-footer\">\n             <el-button v-if=\"!isEdit\" class=\"sys-Btn\" type=\"primary\" @click=\"handleAddBusiness\">确 定</el-button>               \n             <el-button v-else class=\"sys-Btn\" type=\"primary\" @click=\"handleAConfirmEditBusiness\">修改</el-button>  \n             <el-button @click=\"concealDialog\">取 消</el-button>\n           </span>\n        </el-dialog> \n      <el-dialog class=\"dialog\"\n           id=\"setcommisionDialog\"\n           title=\"设置佣金\"\n           :visible.sync=\"commisionDialog\"\n           width=\"23%\"\n           >\n             <el-form :model=\"commisionForm\" :rules=\"commisionRules\" ref=\"commisionRules\" label-width=\"auto\" size=\"medium\" label-position=\"right\" class=\"demo-ruleForm\">\n               <el-form-item label=\"确认用户名：\" prop=\"account\">\n                 <el-input disabled :placeholder=\"commisionForm.account\"></el-input>\n               </el-form-item>\n               <el-form-item label=\"佣金比例：\" prop=\"rate\">\n                 <el-input v-model=\"commisionForm.rate\"></el-input>  \n               </el-form-item>              \n             </el-form>\n           <span slot=\"footer\" class=\"dialog-footer\">\n\n             <el-button  class=\"sys-Btn\" type=\"primary\" @click=\"handleConfirmSetCommis\">确 定</el-button>               \n             \n             <el-button @click=\"commisionDialog = false\">取 消</el-button>\n           </span>\n    </el-dialog>\n                              \n    </div>\n</template>\n<script>\nimport { async } from 'q';\nexport default {\n    data() {\n        return {\n            dialogVisible: false,\n            commisionDialog: false,\n            userState:'',\n            isEdit: false,\n            total: 0,\n            condition: {\n               keyword: '',\n               page:1,\n               type:1\n            },\n            businessList: [],\n            buisform: {\n                account:'',\n                businessName: '',\n                industry: '',\n                password: '',\n                password2: '',\n                id:0\n            },\n            commisionForm: {\n                account: '',\n                rate: ''\n            },\n            buisRules:{\n              account: [\n                  { required: true, message: '请输入账号', trigger: 'blur' },\n              ],\n              businessName: [\n                  { required: true, message: '请输入商户名称', trigger: 'blur' },\n              ],   \n              industry:[\n                  { required: true, message: '请选择行业', trigger: 'blur' },\n              ],\n              password:[\n                  { required: true, message: '请输入密码', trigger: 'blur' },                  \n              ],                          \n              password2:[\n                  { required: true, message: '请再次输入密码', trigger: 'blur' },                  \n              ] \n            },\n            commisionRules: {\n              account: [\n                  { required: true, message: '请输入用户名', trigger: 'blur' },\n              ],\n              rate: [\n                  { required: true, message: '请输入佣金比例', trigger: 'blur' },\n              ],                   \n            },            \n        }\n    },\n    methods: {\n        async handleSearchClick(){\n          await this._getBusinessList(this.condition)\n        },\n        handleViewData(account) {\n           this.$router.push({name: 'busiDataStatistic', query: {id: 25}})\n        },\n        async handleAddBusiness(){\n          let body = {\n            tel: this.buisform.account,\n            platformName: this.buisform.businessName,\n            industry: this.buisform.industry,\n            password: this.buisform.password,\n            repassword: this.buisform.password2,\n            platform: 2\n          }\n          let resData = await this.http.post(`${this.common.basePath}/platform/createNewPlatform.api`, body)\n          if(resData.code === 200)\n          {\n            this.$message.success(resData.msg)\n            this.dialogVisible = false\n\n          }\n        },\n        /*\n        **网络获取商户列表\n        */\n        async _getBusinessList(condition){\n          let _condition = condition\n          let resData = await this.http.get('/platform/merchantLists', _condition)\n           this.businessList = resData.data\n           this.condition.page = resData.current_page\n           this.total = resData.total\n        },\n        /*\n         **处理冻结平台账户事件\n         */\n       async handleFrozenAccount(id, index){\n         let _index = index\n         let platformId = id\n         let resData = await this.http.get('/platform/frozenPlatform', {id: platformId})\n         if(resData.code===200)\n         {\n           this.$message.success(\"禁用成功\")\n           this.businessList[_index].isFrozen = true\n           this.businessList[_index].isActive = false\n         }\n        }, \n        /*\n         **启动平台账户事件\n         */\n        async enableAccount(id) {\n          let _id = id\n          let resData = await this.http.get('/platform/enablePlatform', {id: _id})\n          if(resData.code === 200){\n            this.$message.success(resData.msg)\n            await this._getBusinessList(this.condition)\n          }\n        },\n       /*\n       **处理确定设置佣金事件\n       */\n       async handleConfirmSetCommis(){\n         let param = {\n           type: 1,\n           tel: this.commisionForm.account,\n           proportion: this.commisionForm.rate\n         }\n         let resData = await this.http.get('/platform/setMerchantComsion', param)\n         if(resData.code == 200)\n         {\n\n           this.$message.success(resData.msg)\n           this.commisionDialog = false\n         }\n       }, \n        /*\n        **处理分页当前页改变事件\n        */\n       handleCurrentchange(val) {\n         this.condition.page = val\n         this._getBusinessList(this.condition)\n       },\n        /*\n        **处理slect选择事件\n        */       \n       async handleSelectChange(val){\n         let _val = val;\n         this.condition.type = _val\n         await this._getBusinessList(this.condition)\n       },\n        /*\n        **编辑商户\n        */        \n       async handleEdit(id) {\n         let _id = id\n         this.isEdit = true\n         this.dialogVisible = true\n         let resData = await this.http.get('/platform/merchantDetail', {id: _id})\n         this.buisform.industry = resData.industry\n         this.buisform.businessName = resData.platformName\n         this.buisform.account = resData.tel\n         this.buisform.id = _id\n       },\n        /*\n        **确认修改商户\n        */ \n       async handleAConfirmEditBusiness() {\n         let data = {\n           id: this.buisform.id,\n           tel: this.buisform.account,\n           platformName: this.buisform.businessName,\n           industry: this.buisform.industry,\n           password: this.buisform.password,\n           repassword: this.buisform.password2\n         }\n         let resData = await this.http.post('/platform/editMerchant', data)\n         if(resData.code === 200){\n           this.$message.success(resData.msg)\n           await this._getBusinessList(this.condition)\n           this.dialogVisible = false\n         }\n    \n\n       },\n       /*\n       **取消增加/修改商户\n       */\n       concealDialog() {\n         this.dialogVisible = false\n         this.$refs.buisform.resetFields()\n       }\n    },\n    async mounted() {\n      await this._getBusinessList(this.condition)\n    },\n}\n</script>\n\n"]}]}